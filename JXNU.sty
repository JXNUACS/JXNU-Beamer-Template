\mode<presentation>

\newif\ifbeamer@secheader
\beamer@secheaderfalse

\usepackage{beamerfoils}
\usepackage{pgf}
\usepackage{tikz}
\usepackage{xcolor}
\usepackage[T1]{fontenc}
\usepackage{latexsym,amsmath,xcolor,multicol,booktabs,calligra}
\usepackage{graphicx,pstricks,listings,stackengine}
%-------------------------------------------Font Settings-------------------------------------------------%
% 设置 tt 字体族使用 Cascadia Mono
\setmonofont[BoldFont = Cascadia Mono SemiBold]{Cascadia Mono SemiLight}
% 设置中文字体，使用思源宋体和思源黑体，对应于 rm 和 sf 字体族，tt 字体族使用方正黑仿 简，it 字体形统一使用霞鹜文楷
\setCJKmainfont[ItalicFont = LXGW WenKai, BoldItalicFont = LXGW WenKai Bold]{Source Han Serif SC}
\setCJKsansfont[ItalicFont = LXGW WenKai, BoldItalicFont = LXGW WenKai Bold]{Source Han Sans SC}
\setCJKmonofont[ItalicFont = LXGW WenKai, BoldItalicFont = LXGW WenKai Bold]{FZHeiFangS}
% 正文字体应使用无衬线字体，但数学公式统一调整为原本 article 等文档类下的衬线字体
\usefonttheme{professionalfonts}
%---------------------------------------------------------------------------------------------------------%

%-------------------------------------------Logo Settings-------------------------------------------------%
\MyLogo{%
    %\includegraphics[height=0.15\textwidth]{fig/school.jpg}
    \pgfputat{\pgfxy(-11.4,0)}{\includegraphics[height=1cm]{pic/JXNU_logo.png}}
}
\LogoOff
%---------------------------------------------------------------------------------------------------------%


%-------------------------------------------Background Settings-------------------------------------------%
\pgfdeclareimage[width=5cm]{jxnubackground}{pic/JXNU_back.png}
\setbeamertemplate{background canvas}{
    \begin{picture}(100,100)
        \put(225, -150) {\pgfuseimage{jxnubackground}}
    \end{picture}
}
%---------------------------------------------------------------------------------------------------------%

%-------------------------------------------Color Settings------------------------------------------------%
\def\cmd#1{\texttt{\color{red}\footnotesize $\backslash$#1}}
\def\env#1{\texttt{\color{blue}\footnotesize #1}}
\definecolor{deepblue}{rgb}{0,0,0.5}
\definecolor{deepred}{RGB}{161,56,56}
\definecolor{deepgreen}{rgb}{0,0.5,0}
\definecolor{halfgray}{gray}{0.55}
\definecolor{jxnured}{RGB}{237,82,82}
\lstset{
    basicstyle=\ttfamily\small,
    keywordstyle=\bfseries\color{deepblue},
    emphstyle=\ttfamily\color{jxnured},    % Custom highlighting style
    stringstyle=\color{\left( deepgreen},
    numbers=left,
    numberstyle=\small\color{halfgray},
    rulesepcolor=\color{red!20!green!20!blue!20},
    frame=shadowbox,
}
%---------------------------------------------------------------------------------------------------------%

%\DeclareOptionBeamer{secheader}{\beamer@secheadertrue}
\ProcessOptionsBeamer
\useoutertheme[footline=authorinstitutetitle,subsection=false]{smoothbars}
\makeatletter % [add curpage/total page at the bottom](http://tex.stackexchange.com/questions/100838/beamer-dresden-theme-miniframes-appeareance-and-frame-number-insertion)
\newcommand{\frameofframes}{/}
\newcommand{\setframeofframes}[1]{\renewcommand{\frameofframes}{#1}}
\setbeamertemplate{footline} 
  {%
    \begin{beamercolorbox}[colsep=1.5pt]{upper separation line foot}
    \end{beamercolorbox}
    \begin{beamercolorbox}[ht=2.5ex,dp=1.125ex,%
      leftskip=.3cm,rightskip=.3cm plus1fil]{author in head/foot}%
      \leavevmode{\usebeamerfont{author in head/foot}\insertshortauthor}%
      \hfill%
      {\usebeamerfont{institute in head/foot}\usebeamercolor[fg]{institute in head/foot}\insertshortinstitute}%
    \end{beamercolorbox}%
    \begin{beamercolorbox}[ht=2.5ex,dp=1.125ex,%
      leftskip=.3cm,rightskip=.3cm plus1fil]{title in head/foot}%
      {\usebeamerfont{title in head/foot}\insertshorttitle}%
      \hfill%
      {\usebeamerfont{frame number}\usebeamercolor[fg]{frame number}\insertframenumber~\frameofframes~\inserttotalframenumber}
    \end{beamercolorbox}%
    \begin{beamercolorbox}[colsep=1.5pt]{lower separation line foot}
    \end{beamercolorbox}
  }
\makeatother
%----------------------------Color Settings------------------------------------%
\useinnertheme{circles}
\xdefinecolor{jxnu}{RGB}{161,56,56}  %RGB#820010
\setbeamercolor{footline}{bg=jxnu}
\setbeamercolor{frametitle}{bg=jxnu,fg=white}
\setbeamercolor{title}{bg=jxnu}
\setbeamerfont{frametitle}{size=\large}
\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{bibliography item}[text]
\setbeamertemplate{caption}[numbered]

\setbeamercolor{palette primary}{use=structure,fg=white,bg=structure.fg}
\setbeamercolor{palette secondary}{use=structure,fg=white,bg=structure.fg!75!black}
\setbeamercolor{palette tertiary}{use=structure,fg=white,bg=structure.fg!50!black}
\setbeamercolor{palette quaternary}{fg=white,bg=structure.fg!50!black}
%\setbeamercolor*{sidebar}{use=structure,bg=structure.fg}
\setbeamercolor{titlelike}{parent=palette primary}

%% try
\setbeamercolor{block title}{bg=jxnu,fg=white}
\setbeamercolor*{block title example}{use={normal text,example text},bg=white,fg=jxnu}
\setbeamercolor{fine separation line}{}
\setbeamercolor{item projected}{fg=white}
\setbeamercolor{palette sidebar primary}{use=normal text,fg=normal text.fg}
\setbeamercolor{palette sidebar quaternary}{use=structure,fg=structure.fg}
\setbeamercolor{palette sidebar secondary}{use=structure,fg=structure.fg}
\setbeamercolor{palette sidebar tertiary}{use=normal text,fg=normal text.fg}
%\setbeamercolor{palette sidebar quaternary}{fg=white}
\setbeamercolor{section in sidebar}{fg=brown}
\setbeamercolor{section in sidebar shaded}{fg=grey}
\setbeamercolor{separation line}{}
\setbeamercolor{sidebar}{bg=jxnu}
\setbeamercolor{sidebar}{parent=palette primary}
\setbeamercolor{structure}{fg=jxnu}
\setbeamercolor{subsection in sidebar}{fg=brown}
\setbeamercolor{subsection in sidebar shaded}{fg=grey}
%--------------------------------------------------------------------------------%

%----------------------------Section Template------------------------------------%
\AtBeginSection[]{{
    \usebackgroundtemplate{\selectcolormodel{gray}\tikz[overlay,remember picture]\node[opacity=0.1]at (3*\paperwidth/4,-3*\paperheight/5){\includegraphics[width=6cm]{pic/JXNU_logo.png}};}
	\begin{frame}
		\tableofcontents[sectionstyle=show/shaded,subsectionstyle=show/shaded/hide,subsubsectionstyle=show/shaded/hide]
	\end{frame}
}
}
%\AtBeginSubsection[]{
%    \LogoOn
%	\begin{frame}
%		\tableofcontents[sectionstyle=show/shaded,subsectionstyle=show/shaded/hide,subsubsectionstyle=show/shaded/hide]
%	\end{frame}
%    \LogoOff
%}
%--------------------------------------------------------------------------------%

%------------------------------Other Settings------------------------------------%
% 调整左右边距.
\setbeamersize{text margin left=0.049\paperwidth, text margin right=0.049\paperwidth}
% 设置目录深度为 2 (显示至 subsection).
\setcounter{tocdepth}{2}
% 设置图片路径为项目文件夹下 `image' `images' `figure' `figures'.
\graphicspath{{image/}{images/}{figure/}{figures/}{resources/}}
% 半透明化尚未出现的内容.
\setbeamercovered{transparent}
% 导航栏为空.
\beamertemplatenavigationsymbolsempty


\mode
<all>
